/*
 * CreateModule (jquery.modulecreator.js) 1.4.10 | MIT & BSD
 * https://github.com/KovalevEvgeniy/module-creator
 */

"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(c){c.CreateModule=function(){var o,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"run",value:function(){a.props=l,a.extendProps(),a.makeLib()}},{key:"getCamelCase",value:function(e){return e.substr(0,1).toLowerCase()+e.substr(1)}},{key:"makeLib",value:function(){(c=c||{}).fn=c.fn||{},c[p]=c[p]?c[p]:c.fn[p]=function(){var e=this;"function"==typeof e&&(e=c[p].element||c("<div>"),c[p].element=e);for(var t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=e,o=0;o<e.length;o++){var a=e[o];if("object"===_typeof(t)||void 0===t){if("object"!==_typeof(a[p])){var i=new h(a,t);i.list[i.hash]=i}}else{if(!a[p][t]||"function"!=typeof a[p][t])throw new Error('Method "'+t+'" is not defined in the "'+p+'" module');r=a[p][t].apply(a[p],n)||e}}return r},c[p].struct=l}},{key:"extendProps",value:function(){if(l.extends&&0<l.extends.length){a.parents={},a.parent={};var e=l.extends.map(function(e){e=a.getCamelCase(e);var t=c[e].struct;return a.parents[e]=t.privateMethods,t});a.parentMethods=a.extend.apply(a,[{}].concat(_toConsumableArray(e))).privateMethods,l.parents=a.parents,l=a.extend.apply(a,[{}].concat(_toConsumableArray(e),[l]))}}},{key:"extend",value:function(){for(var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.map(function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("function"==typeof n)o[t]=n;else if(Array.isArray(n))o[t]=a.deepCopy(n);else if("object"===_typeof(n)){var r=void 0;r=Array.isArray(o[t])?a.extend({},n):"object"===_typeof(o[t])?a.extend(o[t],n):a.extend({},n),o[t]=r}else o[t]=n}}),o}},{key:"deepCopy",value:function(e){if("function"==typeof e)return e;if(Array.isArray(e))return e.map(function(e){return a.deepCopy(e)});if("object"!==_typeof(e))return e;var t=a.extend({},e);for(var n in t)t.hasOwnProperty(n)&&(t[n]=a.deepCopy(t[n]));return t}},{key:"haveFunctions",value:function(e){for(var t in e)if(e.hasOwnProperty(t)&&"function"!=typeof e[t])throw new Error('The "'+t+'" element must be a function')}}]),a}(),r=function(){function r(e,t,n){_classCallCheck(this,r),this.inst=e,this.watch=n,this.data={},this.instData=t,this.setData(t)}return _createClass(r,[{key:"setData",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in t)t.hasOwnProperty(n)&&this.set(n,t[n],this.watch[n]);Object.defineProperty(this.inst,"data",{get:function(){return e.instData}})}},{key:"set",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},r=this;Object.defineProperty(this.instData,t,{get:function(){return r.data[t]},set:function(e){n&&"function"==typeof n&&n(r.data[t],e),r.data[t]=e}}),r.data[t]=e}}]),r}(),a=function(){function n(e,t){_classCallCheck(this,n),this.privateMethods={},this.options=t,this.globalReg(e),this.addHooks(e),this.addSuperMethods(e),this.addPrivateMethods(e),this.addPublicMethods(e),this.setData(e),this.setOptions(e)}return _createClass(n,[{key:"globalReg",value:function(e){var n={storage:u,list:s},t=function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){throw new Error('Setting the value to "'+e+'" failed. Object "'+t+'" is not editable')}})};for(var r in n)t(r)}},{key:"setData",value:function(e){var t=d.extend({},l.data||{},this.options.data||{}),n=d.extend({},l.watch||{},this.options.watch||{});d.haveFunctions(n),o=new r(e,t,n)}},{key:"setOptions",value:function(e){var t=Math.round(new Date*Math.random()),n=e.el.dataset,r=n[p],o={},a={};if(0<Object.keys(n).length)for(var i in n)if(i!==p&&0===i.indexOf(p)&&n.hasOwnProperty(i)){var s=d.getCamelCase(i.split(p)[1]);try{a[s]=JSON.parse(n[i])}catch(e){throw new Error("Check the data attribute "+i+" in the element. "+n[i]+" is not valid JSON format.")}}try{o=r?JSON.parse(r):{}}catch(e){throw new Error("Check the data attributes in the element. "+r+" is not valid JSON format.")}e.hash=e.el.hash=t;var u=d.extend({},l.options||{},this.options.options||{},o,a,{hash:t}),h={},c=function(t){u.hasOwnProperty(t)&&Object.defineProperty(h,t,{set:function(e){u[t]=e},get:function(){return e._getOption(u,t)}})};for(var f in u)c(f);Object.defineProperty(e,"options",{get:function(){return h}})}},{key:"addHooks",value:function(o){var a=d.extend({beforeCreate:function(){},bindEvent:function(){},afterCreate:function(){}},l.hooks||{},this.options.hooks||{});d.haveFunctions(a),Object.defineProperty(o,"hook",{get:function(){return function(e){if(!a[e])throw new Error('Hook "'+e+'" is not defined in the module');for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return a[e].apply(o,n)}}})}},{key:"addPrivateMethods",value:function(e){if(l.privateMethods)for(var t in d.haveFunctions(l.privateMethods),l.privateMethods)if(l.privateMethods.hasOwnProperty(t)){if("_"!==t[0])throw new Error('The name of the private method must begin with "_". Rename the method '+t);e[t]=this.privateMethods[t]=l.privateMethods[t].bind(e)}}},{key:"addPublicMethods",value:function(e){var t=this;if(e.el[p]={data:e.data,getStruct:function(){return e._getStruct()},destroy:function(){return e._destroy()}},l.publicMethods)for(var n in d.haveFunctions(l.publicMethods),l.publicMethods)if(l.publicMethods.hasOwnProperty(n)){var r={};if(Object.defineProperty(r,"inst",{get:function(){return e.el[p]}}),Object.defineProperty(r,"private",{get:function(){return t.privateMethods},set:function(e){throw new Error('Setting the value to "'+e+'" failed. Object "private" is not editable')}}),e.el[p][n]=l.publicMethods[n].bind(r),e[n])throw new Error("The "+n+" method is already defined in a private scope!");if("_"===n[0])throw new Error('The public method should not start with "_". Rename the method '+n)}}},{key:"addSuperMethods",value:function(a,e){d.extend(a.__proto__,d.parentMethods),Object.defineProperty(a,"super",{get:function(){return function(t,e){try{for(var n=arguments.length,r=new Array(2<n?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return l.parents&&"object"===_typeof(l.parents[t])&&l.parents[t][e]?l.parents[t][e].apply(this,r):a.__proto__[t].apply(this,[e].concat(r))}catch(e){throw new Error('Method "'+t+'" is not defined in the parents modules')}}}})}}]),n}(),i=l.name,p=d.getCamelCase(i),s={},u={};d.run();var h=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,r);var n=this;n.element=c(e),1<n.element.length?n.element.map(function(e){return new c[i](e,t)}):(n.el=e,new a(n,t),n.hook("beforeCreate"),n.hook("create"),n.hook("bindEvent"),n.hook("afterCreate"))}return _createClass(r,[{key:"_set",value:function(e,t,n){o.set(e,t,n)}},{key:"_getEventList",value:function(){return{click:"touchend",mouseenter:"touchstart",mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove",mouseleave:"touchend"}}},{key:"_getEventName",value:function(e,t){return t=(t?"."+t:"")+"."+this.hash,this._isMobile()?(this._getEventList()[e]||e)+t:e+t}},{key:"_isMobile",value:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},{key:"_destroy",value:function(){delete this.list[this.hash],delete this.el.hash,delete this.el[p]}},{key:"_getOption",value:function(e,t){return e[t]}},{key:"_extend",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return d.extend.apply(d,[e].concat(n))}},{key:"_deepCopy",value:function(e){return d.deepCopy(e)}}]),r}()}}(jQuery);